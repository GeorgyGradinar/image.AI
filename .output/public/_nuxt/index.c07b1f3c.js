import{Z as R,l as d,ak as E,al as P,am as A,s as B,m as S,v as y,b as h,f as t,j as T,z,u as v,A as M,x as C,F as k,r as Z,o as f,t as o}from"./entry.c06b1dca.js";import{k as D,a as F,l as N,s as U,b as j}from"./seoConfig.1ad3aae1.js";const V=R("transactionsStore",()=>{let l=d([]),r=d(1),_=d(!1);function u(){l.value=[],r.value=1}function i(c){l.value=[...l.value,...c]}function a(c){r.value=c}function m(c){_.value=c}return{clearStore:u,transactions:l,addTransactions:i,pages:r,changePages:a,isShowButtonMoreTransactions:_,toggleShowButtonMoreTransactions:m}});function q(){const l=V(),{addTransactions:r,changePages:_}=l;function u(){let i=[A.authorization];$fetch(`${E}/api/v1/user/transactions?items_per_page=30&page=${l.pages}`,P("GET",i)).then(a=>{console.log(a.transactions),r(a.transactions.data),_(a.transactions.current_page+1),a.transactions.data&&console.log()})}return{getPersonTransaction:u}}const H={class:"wrapper-history"},L={class:"header-history"},O=t("h1",null,"История покупок",-1),G={class:"wrapper-search"},I={class:"history"},Y=t("thead",null,[t("tr",null,[t("th",{class:"text-left"}," Вид "),t("th",{class:"text-left"}," Дата "),t("th",{class:"text-left"}," Сумма "),t("th",{class:"text-left"}," Тип "),t("th",{class:"text-left"}," Статус ")])],-1),J={class:"top-block"},K={class:"bottom-block"},Q={class:"mobile-sum"},W=t("p",null,"Кол-во",-1),X={class:"sum"},tt={class:"mobile-type"},et={class:"mobile-date"},st=t("p",null,"Дата",-1),at={class:"date"},lt={__name:"index",setup(l){const{setProperty:r}=j();r(D.title,[...F,...D.meta],N,U);const{getPersonTransaction:_}=q(),u=V();B(u),d("Дата");let i=d("Статус"),a=d(""),m=d([{id:1,action:"start_credits",credits_old:0,credits_new:25,user_id:2,created_at:"2023-06-05T07:35:10.000000Z",updated_at:"2023-06-05T07:35:10.000000Z",type:"Депозит"},{id:2,action:"generate_image",credits_old:25,credits_new:23,user_id:2,created_at:"2023-06-05T07:35:10.000000Z",updated_at:"2023-06-05T07:35:10.000000Z",type:"Генерация"},{id:3,action:"generate_image",credits_old:23,credits_new:20,user_id:2,created_at:"2023-06-05T07:35:10.000000Z",updated_at:"2023-06-05T07:35:10.000000Z",type:"Генерация"},{id:4,action:"generate_image",credits_old:20,credits_new:19,user_id:2,created_at:"2023-10-11T07:35:10.000000Z",updated_at:"2023-06-05T07:35:10.000000Z",type:"Генерация"}]);S(()=>{c()});function c(){_()}function x(n){if(n==="start_credits")return"Начальный депозит";if(n==="generate_image")return"Генерация картинок"}function w(n){let e=new Date(n),p=e.getDate()<10?`0${e.getDate()}`:e.getDate(),g=e.getMonth()+1<10?`0${e.getMonth()+1}`:e.getMonth()+1;return`${p}.${g}.${e.getFullYear()} ${e.getHours()}:${e.getMinutes()}`}function b(n,e){let p=n>e?n:e,g=n<e?n:e;return p-g}return(n,e)=>{const p=y("v-select"),g=y("v-text-field"),$=y("v-table");return f(),h("div",H,[t("div",L,[O,t("div",G,[T(p,{class:z(["drop-down","rounded-lg"]),modelValue:v(i),"onUpdate:modelValue":e[0]||(e[0]=s=>M(i)?i.value=s:i=s),items:["Успешно","Отмена","Ожидание"],variant:"outlined","return-object":"","persistent-hint":""},null,8,["modelValue"]),T(g,{modelValue:v(a),"onUpdate:modelValue":e[1]||(e[1]=s=>M(a)?a.value=s:a=s),modelModifiers:{trim:!0},density:"compact",variant:"solo",label:"Поиск","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])]),t("section",I,[T($,{class:"transactions"},{default:C(()=>[Y,t("tbody",null,[(f(!0),h(k,null,Z(v(m),s=>(f(),h("tr",{key:s.id},[t("td",null,o(x(s.action)),1),t("td",null,o(w(s.created_at)),1),t("td",null,o(b(s.credits_old,s.credits_new)),1),t("td",null,o(s.type),1),t("td",null,"Успешно "+o(),1)]))),128))])]),_:1}),(f(!0),h(k,null,Z(v(m),s=>(f(),h("div",{class:"mobile-transactions",key:s.id},[t("div",J,[t("p",null,o(x(s.action)),1),t("p",null,"Успешно"+o(),1)]),t("div",K,[t("div",Q,[W,t("p",X,o(b(s.credits_old,s.credits_new)),1)]),t("p",tt,o(s.type),1),t("div",et,[st,t("p",at,o(w(s.created_at)),1)])])]))),128))])])}}};export{lt as default};
